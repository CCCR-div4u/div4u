apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: div4u-staging

resources:
- ../../base/backend
- ../../base/frontend
- ../../base/comparison
- ../../base/common

patches:
- path: patches/configmap-staging.yaml
  target:
    kind: ConfigMap
    name: app-config
- path: patches/ingress-staging.yaml
  target:
    kind: Ingress
    name: div4u-ingress

images:
- name: harbor.bluesunnywings.com/div4u/div4u-backend
  newName: harbor.bluesunnywings.com/div4u-staging/div4u-backend
  newTag: PLACEHOLDER
- name: harbor.bluesunnywings.com/div4u/div4u-frontend
  newName: harbor.bluesunnywings.com/div4u-staging/div4u-frontend
  newTag: PLACEHOLDER
- name: harbor.bluesunnywings.com/div4u/div4u-comparison
  newName: harbor.bluesunnywings.com/div4u-staging/div4u-comparison
  newTag: PLACEHOLDER

labels:
- pairs:
    environment: staging

namePrefix: staging-